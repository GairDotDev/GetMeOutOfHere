{% extends "base.html" %}

{% block content %}
<div class="max-w-3xl mx-auto">
    <div class="bg-white rounded-lg shadow-sm p-8">
        <h1 class="text-3xl font-bold text-gray-900 mb-4">Get In Touch</h1>
        <p class="text-gray-600 mb-8">
            I'm available for full-time employment opportunities and freelance projects. 
            Whether you're looking to hire a backend developer or need help with a specific project, 
            I'd love to hear from you!
        </p>

        <!-- Success Message -->
        <div id="success-message" class="hidden mb-6 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded">
            Thank you for your message! I'll get back to you as soon as possible.
        </div>

        <!-- Error Message -->
        <div id="error-message" class="hidden mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded"></div>

        <!-- Contact Form -->
        <form 
            hx-post="/contact" 
            hx-on::after-request="handleContactResponse(event)"
            class="space-y-6"
        >
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label for="name" class="block text-sm font-medium text-gray-700 mb-1">
                        Name <span class="text-red-500">*</span>
                    </label>
                    <input 
                        type="text" 
                        id="name" 
                        name="name"
                        class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                        placeholder="Your Name"
                        required
                    >
                </div>

                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700 mb-1">
                        Email <span class="text-red-500">*</span>
                    </label>
                    <input 
                        type="email" 
                        id="email" 
                        name="email"
                        class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                        placeholder="your.email@example.com"
                        required
                    >
                </div>
            </div>

            <div>
                <label for="inquiry_type" class="block text-sm font-medium text-gray-700 mb-1">
                    Inquiry Type <span class="text-red-500">*</span>
                </label>
                <select 
                    id="inquiry_type" 
                    name="inquiry_type"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                    required
                >
                    <option value="">Select an option...</option>
                    <option value="employment">Employment Opportunity</option>
                    <option value="freelance">Freelance Project</option>
                    <option value="collaboration">Collaboration</option>
                    <option value="other">Other</option>
                </select>
            </div>

            <div>
                <label for="company" class="block text-sm font-medium text-gray-700 mb-1">
                    Company/Organization
                </label>
                <input 
                    type="text" 
                    id="company" 
                    name="company"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                    placeholder="Optional"
                >
            </div>

            <div>
                <label for="message" class="block text-sm font-medium text-gray-700 mb-1">
                    Message <span class="text-red-500">*</span>
                </label>
                <textarea 
                    id="message" 
                    name="message"
                    rows="6"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                    placeholder="Tell me about your opportunity or project..."
                    required
                ></textarea>
            </div>

            <button 
                type="submit"
                class="w-full bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 font-medium"
            >
                Send Message
            </button>
        </form>
    </div>

    <!-- Contact Information -->
    <div class="mt-8 bg-white rounded-lg shadow-sm p-8">
        <h2 class="text-2xl font-bold text-gray-900 mb-4">Other Ways to Reach Me</h2>
        <div class="space-y-3">
            <div class="flex items-center">
                <svg class="w-5 h-5 text-gray-500 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                </svg>
                <a href="mailto:tom@gair.dev" class="text-blue-600 hover:text-blue-800">
                    tom@gair.dev
                </a>
            </div>
            <div class="flex items-center">
                <svg class="w-5 h-5 text-gray-500 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"></path>
                </svg>
                <a href="https://gair.dev" target="_blank" class="text-blue-600 hover:text-blue-800">
                    gair.dev
                </a>
            </div>
        </div>
    </div>
</div>

<script>
    function handleContactResponse(event) {
        const successMsg = document.getElementById('success-message');
        const errorMsg = document.getElementById('error-message');
        
        // Hide both messages initially
        successMsg.classList.add('hidden');
        errorMsg.classList.add('hidden');
        
        if (event.detail.successful) {
            // Show success message and reset form
            successMsg.classList.remove('hidden');
            event.target.reset();
            
            // Scroll to top to show success message
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            // Hide success message after 5 seconds
            setTimeout(() => {
                successMsg.classList.add('hidden');
            }, 5000);
        } else {
            // Show error message
            errorMsg.textContent = 'There was an error sending your message. Please try again or contact me directly via email.';
            errorMsg.classList.remove('hidden');
            
            // Scroll to top to show error message
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    }
</script>
{% endblock %}
